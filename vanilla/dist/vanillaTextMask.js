!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.vanillaTextMask=r():e.vanillaTextMask=r()}(self,(function(){return(()=>{"use strict";var e={d:(r,t)=>{for(var n in t)e.o(t,n)&&!e.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:t[n]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};e.r(r),e.d(r,{conformToMask:()=>p,default:()=>w,maskInput:()=>k});var t=[],n="";function o(e){var r=e.previousConformedValue,o=void 0===r?n:r,i=e.previousPlaceholder,a=void 0===i?n:i,u=e.currentCaretPosition,l=void 0===u?0:u,s=e.conformedValue,f=e.rawValue,c=e.placeholderChar,d=e.placeholder,p=e.indexesOfPipedChars,v=void 0===p?t:p,h=e.caretTrapIndexes,m=void 0===h?t:h;if(0===l||!f.length)return 0;var g=f.length,y=o.length,b=d.length,O=s.length,C=g-y,P=C>0;if(C>1&&!P&&0!==y)return l;var k,w,x=0;if(!P||o!==s&&s!==d){var j=s.toLowerCase(),T=f.toLowerCase().substr(0,l).split(n).filter((function(e){return-1!==j.indexOf(e)}));w=T[T.length-1];var S=a.substr(0,T.length).split(n).filter((function(e){return e!==c})).length,V=d.substr(0,T.length).split(n).filter((function(e){return e!==c})).length!==S,E=void 0!==a[T.length-1]&&void 0!==d[T.length-2]&&a[T.length-1]!==c&&a[T.length-1]!==d[T.length-1]&&a[T.length-1]===d[T.length-2];!P&&(V||E)&&S>0&&d.indexOf(w)>-1&&void 0!==f[l]&&(k=!0,w=f[l]);for(var M=v.map((function(e){return j[e]})).filter((function(e){return e===w})).length,A=T.filter((function(e){return e===w})).length,N=d.substr(0,d.indexOf(c)).split(n).filter((function(e,r){return e===w&&f[r]!==e})).length+A+M+(k?1:0),D=0,I=0;I<O&&(x=I+1,j[I]===w&&D++,!(D>=N));I++);}else x=l-C;if(P){for(var L=x,R=x;R<=b;R++)if(d[R]===c&&(L=R),d[R]===c||-1!==m.indexOf(R)||R===b)return L}else if(k){for(var J=x-1;J>=0;J--)if(s[J]===w||-1!==m.indexOf(J)||0===J)return J}else for(var W=x;W>=0;W--)if(d[W-1]===c||-1!==m.indexOf(W)||0===W)return W}var i="_",a=[];function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;if(!l(e))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(-1!==e.indexOf(r))throw new Error("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\n"+"The placeholder character that was received is: ".concat(JSON.stringify(r),"\n\n")+"The mask that was received is: ".concat(JSON.stringify(e)));return e.map((function(e){return e instanceof RegExp?r:e})).join("")}function l(e){return Array.isArray&&Array.isArray(e)||e instanceof Array}function s(e){return"string"==typeof e||e instanceof String}function f(e){for(var r,t=[];-1!==(r=e.indexOf("[]"));)t.push(r),e.splice(r,1);return{maskWithoutCaretTraps:e,indexes:t}}var c=[],d="";function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!l(r)){if("function"!=typeof r)throw new Error("Text-mask:conformToMask; The mask property must be an array.");r=f(r=r(e,t)).maskWithoutCaretTraps}var n=t.guide,o=void 0===n||n,a=t.previousConformedValue,s=void 0===a?d:a,p=t.placeholderChar,v=void 0===p?i:p,h=t.placeholder,m=void 0===h?u(r,v):h,g=t.currentCaretPosition,y=t.keepCharPositions,b=!1===o&&void 0!==s,O=e.length,C=s.length,P=m.length,k=r.length,w=O-C,x=w>0,j=g+(x?-w:0),T=j+Math.abs(w);if(!0===y&&!x){for(var S=d,V=j;V<T;V++)m[V]===v&&(S+=v);e=e.slice(0,j)+S+e.slice(j,O)}for(var E=e.split(d).map((function(e,r){return{char:e,isNew:r>=j&&r<T}})),M=O-1;M>=0;M--){var A=E[M].char;if(A!==v){var N=M>=j&&C===k;A===m[N?M-w:M]&&E.splice(M,1)}}var D=d,I=!1;e:for(var L=0;L<P;L++){var R=m[L];if(R===v){if(E.length>0)for(;E.length>0;){var J=E.shift(),W=J.char,_=J.isNew;if(W===v&&!0!==b){D+=v;continue e}if(r[L].test(W)){if(!0===y&&!1!==_&&s!==d&&!1!==o&&x){for(var q=E.length,F=null,z=0;z<q;z++){var B=E[z];if(B.char!==v&&!1===B.isNew)break;if(B.char===v){F=z;break}}null!==F?(D+=W,E.splice(F,1)):L--}else D+=W;continue e}I=!0}!1===b&&(D+=m.substr(L,P));break}D+=R}if(b&&!1===x){for(var G=null,H=0;H<D.length;H++)m[H]===v&&(G=H);D=null!==G?D.substr(0,G+1):d}return{conformedValue:D,meta:{someCharsRejected:I}}}function v(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function h(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?v(Object(t),!0).forEach((function(r){m(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function m(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}var y="none",b="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),O="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:setTimeout;function C(e,r){document.activeElement===e&&(b?O((function(){return e.setSelectionRange(r,r,y)}),0):e.setSelectionRange(r,r,y))}function P(e){if(s(e))return e;if("number"!=typeof(r=e)||void 0!==r.length||isNaN(r)){if(null==e)return"";throw new Error("The 'value' provided to Text Mask needs to be a string or a number. The value "+"received was:\n\n ".concat(JSON.stringify(e)))}return String(e);var r}function k(e){var r,t,n=e.inputElement,a=(r=e,{state:t={previousConformedValue:void 0,previousPlaceholder:void 0},update:function(e){var n,a,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,c=l.inputElement,d=l.mask,v=l.guide,m=l.pipe,y=l.placeholderChar,b=void 0===y?i:y,O=l.keepCharPositions,k=void 0!==O&&O,w=l.showMask,x=void 0!==w&&w;if(void 0===e&&(e=c.value),e!==t.previousConformedValue&&("object"===g(d)&&void 0!==d.pipe&&void 0!==d.mask&&(m=d.pipe,d=d.mask),d instanceof Array&&(n=u(d,b)),!1!==d)){var j,T=P(e),S=c.selectionEnd,V=t.previousConformedValue,E=t.previousPlaceholder;if("function"==typeof d){if(!1===(a=d(T,{currentCaretPosition:S,previousConformedValue:V,placeholderChar:b})))return;var M=f(a),A=M.maskWithoutCaretTraps;j=M.indexes,n=u(a=A,b)}else a=d;var N={previousConformedValue:V,guide:v,placeholderChar:b,pipe:m,placeholder:n,currentCaretPosition:S,keepCharPositions:k},D=p(T,a,N).conformedValue,I="function"==typeof m,L={};I&&(!1===(L=m(D,h({rawValue:T},N)))?L={value:V,rejected:!0}:s(L)&&(L={value:L}));var R=I?L.value:D,J=o({previousConformedValue:V,previousPlaceholder:E,conformedValue:R,placeholder:n,rawValue:T,currentCaretPosition:S,placeholderChar:b,indexesOfPipedChars:L.indexesOfPipedChars,caretTrapIndexes:j}),W=R===n&&0===J?x?n:"":R;t.previousConformedValue=W,t.previousPlaceholder=n,c.value!==W&&(c.value=W,C(c,J))}}}),l=function(e){var r=e.target.value;return a.update(r)};return n.addEventListener("input",l),a.update(n.value),{textMaskInputElement:a,destroy:function(){n.removeEventListener("input",l)}}}const w=k;return r})()}));