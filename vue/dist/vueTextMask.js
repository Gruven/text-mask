!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.vueTextMask=t():e.vueTextMask=t()}(self,(function(){return(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{conformToMask:()=>d,default:()=>T});var r=[],n="";function o(e){var t=e.previousConformedValue,o=void 0===t?n:t,i=e.previousPlaceholder,a=void 0===i?n:i,u=e.currentCaretPosition,s=void 0===u?0:u,l=e.conformedValue,c=e.rawValue,f=e.placeholderChar,p=e.placeholder,d=e.indexesOfPipedChars,h=void 0===d?r:d,v=e.caretTrapIndexes,m=void 0===v?r:v;if(0===s||!c.length)return 0;var y=c.length,b=o.length,g=p.length,O=l.length,k=y-b,P=k>0;if(k>1&&!P&&0!==b)return s;var w,j,C=0;if(!P||o!==l&&l!==p){var x=l.toLowerCase(),T=c.toLowerCase().substr(0,s).split(n).filter((function(e){return-1!==x.indexOf(e)}));j=T[T.length-1];var S=a.substr(0,T.length).split(n).filter((function(e){return e!==f})).length,M=p.substr(0,T.length).split(n).filter((function(e){return e!==f})).length!==S,E=void 0!==a[T.length-1]&&void 0!==p[T.length-2]&&a[T.length-1]!==f&&a[T.length-1]!==p[T.length-1]&&a[T.length-1]===p[T.length-2];!P&&(M||E)&&S>0&&p.indexOf(j)>-1&&void 0!==c[s]&&(w=!0,j=c[s]);for(var V=h.map((function(e){return x[e]})).filter((function(e){return e===j})).length,A=T.filter((function(e){return e===j})).length,I=p.substr(0,p.indexOf(f)).split(n).filter((function(e,t){return e===j&&c[t]!==e})).length+A+V+(w?1:0),q=0,D=0;D<O&&(C=D+1,x[D]===j&&q++,!(q>=I));D++);}else C=s-k;if(P){for(var N=C,$=C;$<=g;$++)if(p[$]===f&&(N=$),p[$]===f||-1!==m.indexOf($)||$===g)return N}else if(w){for(var B=C-1;B>=0;B--)if(l[B]===j||-1!==m.indexOf(B)||0===B)return B}else for(var F=C;F>=0;F--)if(p[F-1]===f||-1!==m.indexOf(F)||0===F)return F}var i="_",a=[];function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;if(!s(e))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(-1!==e.indexOf(t))throw new Error("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\n"+"The placeholder character that was received is: ".concat(JSON.stringify(t),"\n\n")+"The mask that was received is: ".concat(JSON.stringify(e)));return e.map((function(e){return e instanceof RegExp?t:e})).join("")}function s(e){return Array.isArray&&Array.isArray(e)||e instanceof Array}function l(e){return"string"==typeof e||e instanceof String}function c(e){for(var t,r=[];-1!==(t=e.indexOf("[]"));)r.push(t),e.splice(t,1);return{maskWithoutCaretTraps:e,indexes:r}}var f=[],p="";function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!s(t)){if("function"!=typeof t)throw new Error("Text-mask:conformToMask; The mask property must be an array.");t=c(t=t(e,r)).maskWithoutCaretTraps}var n=r.guide,o=void 0===n||n,a=r.previousConformedValue,l=void 0===a?p:a,d=r.placeholderChar,h=void 0===d?i:d,v=r.placeholder,m=void 0===v?u(t,h):v,y=r.currentCaretPosition,b=r.keepCharPositions,g=!1===o&&void 0!==l,O=e.length,k=l.length,P=m.length,w=t.length,j=O-k,C=j>0,x=y+(C?-j:0),T=x+Math.abs(j);if(!0===b&&!C){for(var S=p,M=x;M<T;M++)m[M]===h&&(S+=h);e=e.slice(0,x)+S+e.slice(x,O)}for(var E=e.split(p).map((function(e,t){return{char:e,isNew:t>=x&&t<T}})),V=O-1;V>=0;V--){var A=E[V].char;if(A!==h){var I=V>=x&&k===w;A===m[I?V-j:V]&&E.splice(V,1)}}var q=p,D=!1;e:for(var N=0;N<P;N++){var $=m[N];if($===h){if(E.length>0)for(;E.length>0;){var B=E.shift(),F=B.char,R=B.isNew;if(F===h&&!0!==g){q+=h;continue e}if(t[N].test(F)){if(!0===b&&!1!==R&&l!==p&&!1!==o&&C){for(var J=E.length,W=null,_=0;_<J;_++){var L=E[_];if(L.char!==h&&!1===L.isNew)break;if(L.char===h){W=_;break}}null!==W?(q+=F,E.splice(W,1)):N--}else q+=F;continue e}D=!0}!1===g&&(q+=m.substr(N,P));break}q+=$}if(g&&!1===C){for(var z=null,G=0;G<q.length;G++)m[G]===h&&(z=G);q=null!==z?q.substr(0,z+1):p}return{conformedValue:q,meta:{someCharsRejected:D}}}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}var b="none",g="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),O="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:setTimeout;function k(e,t){document.activeElement===e&&(g?O((function(){return e.setSelectionRange(t,t,b)}),0):e.setSelectionRange(t,t,b))}function P(e){if(l(e))return e;if("number"!=typeof(t=e)||void 0!==t.length||isNaN(t)){if(null==e)return"";throw new Error("The 'value' provided to Text Mask needs to be a string or a number. The value "+"received was:\n\n ".concat(JSON.stringify(e)))}return String(e);var t}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(){return x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x.apply(this,arguments)}const T={render:function(e){var t=this;return e("input",{ref:"input",domProps:{value:this.value},attrs:this.$attrs,on:x(j({},this.$listeners),{input:function(e){return t.updateValue(e.target.value)}})})},name:"masked-input",inheritAttrs:!1,props:{value:{type:String,required:!1,default:""},mask:{type:[Array,Function,Boolean,Object],required:!0},guide:{type:Boolean,required:!1},placeholderChar:{type:String,required:!1},keepCharPositions:{type:Boolean,required:!1},pipe:{type:Function,required:!1},showMask:{type:Boolean,required:!1}},mounted:function(){this.initMask()},methods:{createTextMaskInputElement:function(e){var t={previousConformedValue:void 0,previousPlaceholder:void 0};return{state:t,update:function(r){var n,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,f=s.inputElement,p=s.mask,h=s.guide,m=s.pipe,b=s.placeholderChar,g=void 0===b?i:b,O=s.keepCharPositions,w=void 0!==O&&O,j=s.showMask,C=void 0!==j&&j;if(void 0===r&&(r=f.value),r!==t.previousConformedValue&&("object"===y(p)&&void 0!==p.pipe&&void 0!==p.mask&&(m=p.pipe,p=p.mask),p instanceof Array&&(n=u(p,g)),!1!==p)){var x,T=P(r),S=f.selectionEnd,M=t.previousConformedValue,E=t.previousPlaceholder;if("function"==typeof p){if(!1===(a=p(T,{currentCaretPosition:S,previousConformedValue:M,placeholderChar:g})))return;var V=c(a),A=V.maskWithoutCaretTraps,I=V.indexes;x=I,n=u(a=A,g)}else a=p;var q={previousConformedValue:M,guide:h,placeholderChar:g,pipe:m,placeholder:n,currentCaretPosition:S,keepCharPositions:w},D=d(T,a,q),N=D.conformedValue,$="function"==typeof m,B={};$&&(!1===(B=m(N,v({rawValue:T},q)))?B={value:M,rejected:!0}:l(B)&&(B={value:B}));var F=$?B.value:N,R=o({previousConformedValue:M,previousPlaceholder:E,conformedValue:F,placeholder:n,rawValue:T,currentCaretPosition:S,placeholderChar:g,indexesOfPipedChars:B.indexesOfPipedChars,caretTrapIndexes:x}),J=F===n&&0===R,W=C?n:"",_=J?W:F;t.previousConformedValue=_,t.previousPlaceholder=n,f.value!==_&&(f.value=_,k(f,R))}}}},setTextMaskInputElement:function(){this.textMaskInputElement=this.createTextMaskInputElement(j({inputElement:this.$refs.input},this.$options.propsData))},initMask:function(){this.setTextMaskInputElement(),this.textMaskInputElement.update(this.value)},bind:function(){this.setTextMaskInputElement(),this.updateValue(this.value)},updateValue:function(e){this.textMaskInputElement.update(e),this.$emit("input",this.$refs.input.value)}},watch:{mask:function(e,t){this.mask!==t&&this.bind()},guide:function(){this.bind()},placeholderChar:function(){this.bind()},keepCharPositions:function(){this.bind()},pipe:function(){this.bind()},showMask:function(){this.bind()}}};return t})()}));